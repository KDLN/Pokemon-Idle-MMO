# Milestone v1.1: UI/UX Polish

**Status:** SHIPPED 2026-01-21
**Phases:** 8-15
**Total Plans:** 37

## Overview

This milestone transformed the functional MVP into a polished product through systematic UI/UX improvements, a real-time battle system overhaul, and design system formalization. Starting with bug fixes to establish baseline stability, then building design foundations before visual polish, and culminating in the complex battle system rework and theme exploration tools.

## Phases

### Phase 8: Bug Fixes

**Goal**: Establish baseline stability by fixing known bugs before larger changes
**Depends on**: Nothing (first phase of v1.1)
**Plans**: 2 plans

Plans:
- [x] 08-01: Fix missing get_quest_details SQL function for contributor display
- [x] 08-02: Fix Guild Bank view toggle and add persistence via Zustand

**Details:**
- Created 031_fix_quest_details.sql migration
- Added guildBankViewMode to Zustand store with persistence
- Requirements: BUG-01, BUG-02

### Phase 9: Design System

**Goal**: Formalize existing design tokens and establish component patterns for consistent visual work
**Depends on**: Phase 8
**Plans**: 5 plans

Plans:
- [x] 09-01: Install CVA/Storybook dependencies, upgrade cn() utility, configure Storybook 10
- [x] 09-02: Audit tokens, create colors/spacing/typography CSS files, document in TOKENS.md
- [x] 09-03: Migrate Button, Card, Badge components to CVA patterns
- [x] 09-04: Create Storybook stories for Button, Card, Badge with interactive examples
- [x] 09-05: Create Colors, Spacing, Typography MDX documentation pages

**Details:**
- Tech added: class-variance-authority, tailwind-merge, clsx, storybook
- Created cn() utility combining clsx + twMerge
- Requirements: DS-01 through DS-07

### Phase 10: Layout & Responsiveness

**Goal**: Make the game comfortable to use across all device sizes with proper typography and touch targets
**Depends on**: Phase 9
**Plans**: 6 plans

Plans:
- [x] 10-01: Establish responsive typography system with 16px minimum body text using clamp()
- [x] 10-02: Standardize touch targets to 44px minimum across all interactive elements
- [x] 10-03: Optimize party panel and activity log layouts for content-based sizing
- [x] 10-04: Test and fix all game screens across mobile/tablet/desktop viewports
- [x] 10-05: Fix 1024px breakpoint mismatch between JavaScript and CSS (gap closure)
- [x] 10-06: Fix Box button accessibility on mobile devices (gap closure)

**Details:**
- Gap closure plans added during phase execution
- Requirements: LAYOUT-01 through LAYOUT-07

### Phase 11: UI Polish

**Goal**: Improve navigation, naming, and display quality throughout the UI
**Depends on**: Phase 10
**Plans**: 4 plans

Plans:
- [x] 11-01: Add direction data to zone connections (database migration + backend)
- [x] 11-02: Implement navigation direction sorting and rename Power-Ups to Boosts
- [x] 11-03: Create active boosts display with countdown timers and expiry notifications
- [x] 11-04: Enhance Guild Bank with Pokemon sprites, sorting, and relative timestamps

**Details:**
- Created 032_zone_directions.sql migration
- Requirements: UI-01 through UI-05

### Phase 12: Party Reordering

**Goal**: Enable players to organize their party through intuitive drag-and-drop
**Depends on**: Phase 11
**Plans**: 3 plans

Plans:
- [x] 12-01: Install @dnd-kit packages and add backend reorder_party endpoint
- [x] 12-02: Implement drag-and-drop party reordering using @dnd-kit
- [x] 12-03: Add visual polish: long-press indicator, drag overlay, error feedback

**Details:**
- Tech added: @dnd-kit/core, @dnd-kit/sortable, @dnd-kit/utilities
- Swap behavior with optimistic updates
- Requirements: UI-06 through UI-08

### Phase 13: Map Overhaul

**Goal**: Transform the map into a polished, intuitive navigation tool with Gen 4-5 Pokemon styling
**Depends on**: Phase 9 (uses design tokens)
**Plans**: 8 plans

Plans:
- [x] 13-01: Install react-zoom-pan-pinch and create map foundation with pan/zoom
- [x] 13-02: Create zone nodes with calculated positions from direction graph
- [x] 13-03: Create zone connection lines with direction arrows
- [x] 13-04: Implement fog of war (visited zones, adjacent unknown markers)
- [x] 13-05: Add center-on-current-zone functionality
- [x] 13-06: Wire zone/path click interactions to travel
- [x] 13-07: Add Pokemon-style frame and visual polish with verification
- [x] 13-08: Integrate map into game layout

**Details:**
- Tech added: react-zoom-pan-pinch
- Fog of war with visitedZones persisted to Zustand
- Requirements: MAP-01 through MAP-05

### Phase 14: Battle System

**Goal**: Create genuine battle uncertainty through progressive turn revelation
**Depends on**: Phase 10 (stable layouts for animation)
**Plans**: 5 plans

Plans:
- [x] 14-01: Create BattleManager for server-side battle state with timeout tracking
- [x] 14-02: Implement progressive turn calculation and request/response protocol
- [x] 14-03: Update client for server-driven battle animation
- [x] 14-04: Compress animations for 800ms budget and add HP bar polish
- [x] 14-05: Handle disconnect/reconnect and battle timeout resolution

**Details:**
- Server-authoritative battle state
- Catch calculated at throw moment (not pre-decided)
- 30-second timeout with auto-resolution
- Requirements: BATTLE-01 through BATTLE-07

### Phase 15: Theme Exploration

**Goal**: Provide tools to visualize and compare theme directions
**Depends on**: Phase 9 (Storybook), Phase 14 (all components finalized)
**Plans**: 4 plans

Plans:
- [x] 15-01: Create Pokemon Clean Modern theme tokens and Storybook theme switching
- [x] 15-02: Create beveled/3D button variant using Josh Comeau layered approach
- [x] 15-03: Create component showcase MDX pages organized by screen context
- [x] 15-04: Create MockGameScreen and theme comparison route at /theme-compare

**Details:**
- Theme via data-theme attribute
- 724-line MockGameScreen with noise texture
- Requirements: THEME-01 through THEME-03

---

## Milestone Summary

**Key Decisions:**

- CVA + tailwind-merge for type-safe component variants
- clamp() for fluid typography (16px min at 375px to 18px max at 1280px)
- Server-authoritative battles with BattleManager
- Catch at throw moment for genuine uncertainty
- @dnd-kit with swap behavior and optimistic updates
- Fog of war starting zone 1 (Pallet Town)
- 800ms animation budget per battle turn
- Theme via data-theme attribute for CSS-only switching

**Issues Resolved:**

- Guild Quest contributors button error (missing RPC function)
- Guild Bank view toggle not persisting
- 1024px breakpoint mismatch between JS and CSS
- Box button inaccessible on mobile (covered by tab bar)

**Technical Debt Incurred:**

- Map uses hardcoded MOCK_POSITIONS instead of server-provided zone data
- BeveledButton component only used in MockGameScreen (experimental)
- Some map components use inline CSS variable fallbacks

---

*For current project status, see .planning/PROJECT.md*
*Archived: 2026-01-21 as part of v1.1 milestone completion*
