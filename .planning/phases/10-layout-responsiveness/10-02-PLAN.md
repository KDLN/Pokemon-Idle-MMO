---
phase: 10-layout-responsiveness
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/components/ui/Button.tsx
  - apps/web/src/app/globals.css
autonomous: true

must_haves:
  truths:
    - "All buttons have at least 44px touch target height"
    - "Map dots have expanded touch targets"
    - "Close/remove buttons meet 44px minimum"
    - "Touch feedback works on touch devices"
  artifacts:
    - path: "apps/web/src/components/ui/Button.tsx"
      provides: "Button with 44px minimum touch target"
      contains: "min-h-[44px]"
    - path: "apps/web/src/app/globals.css"
      provides: "Touch target utilities and map dot sizing"
      contains: ".touch-target"
  key_links:
    - from: "Button.tsx"
      to: "globals.css"
      via: "Tailwind classes + CSS utilities"
      pattern: "min-h-"
---

<objective>
Standardize touch targets across all interactive elements to meet the 44px WCAG minimum.

Purpose: LAYOUT-02 requires all interactive elements to have 44px minimum touch targets for accessibility and mobile usability. Current button sizes, map dots, and various controls violate this.

Output: Updated Button component with 44px minimum, global touch target utilities, and specific fixes for map dots and control buttons.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-layout-responsiveness/10-RESEARCH.md

@apps/web/src/components/ui/Button.tsx
@apps/web/src/app/globals.css
@apps/web/src/components/game/GameShell.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update Button component with touch target minimums</name>
  <files>apps/web/src/components/ui/Button.tsx</files>
  <action>
Update the Button component's CVA variants to ensure 44px minimum touch targets:

1. Add `min-h-[44px]` to the base classes array (after "rounded-xl")

2. Update size variants:
   - `sm`: Change from "px-3 py-1.5 text-xs" to "px-3 py-2 text-sm min-w-[44px]"
   - `md`: Change from "px-4 py-2 text-sm" to "px-4 py-2.5 text-base min-w-[44px]"
   - `lg`: Keep as "px-6 py-3 text-base" (already meets 44px)
   - `icon`: Change from "w-10 h-10" to "w-11 h-11" (44px)

3. Keep all variant styles (primary, secondary, ghost, danger, pokeball) unchanged

4. Keep IconButton component unchanged (it uses size="icon" which will now be 44px)

Why these specific changes:
- sm: Was ~32px height, now ~44px with py-2 padding
- md: Was ~40px height, now ~44px with py-2.5 padding
- icon: Was 40px (10 * 4px), now 44px (11 * 4px)
  </action>
  <verify>
Run `grep -A5 "size:" apps/web/src/components/ui/Button.tsx` and verify:
- sm includes "py-2" and "min-w-[44px]"
- md includes "py-2.5" and "min-w-[44px]"
- icon is "w-11 h-11"
Also verify base classes include "min-h-[44px]"
  </verify>
  <done>Button component enforces 44px minimum on all sizes</done>
</task>

<task type="auto">
  <name>Task 2: Add touch target utilities and fix map dots</name>
  <files>apps/web/src/app/globals.css</files>
  <action>
Add touch target utilities and fix specific elements in globals.css:

1. Add touch target utility classes (before the Mobile Optimizations section):
   ```css
   /* ================== */
   /* Touch Target Utilities */
   /* ================== */

   /* Base touch target - explicit 44px minimum */
   .touch-target {
     min-height: 44px;
     min-width: 44px;
   }

   /* Touch target for inline/small elements - uses pseudo-element expansion */
   .touch-target-inline {
     position: relative;
   }

   .touch-target-inline::before {
     content: '';
     position: absolute;
     top: 50%;
     left: 50%;
     transform: translate(-50%, -50%);
     width: 44px;
     height: 44px;
     /* Expands clickable area without affecting layout */
   }
   ```

2. Update map dot styling (in the MAP DOT section around line 1780):
   ```css
   .map-dot {
     position: absolute;
     width: 12px;
     height: 12px;
     border-radius: 50%;
     border: none;
     transform: translate(-50%, -50%);
     cursor: pointer;
     transition: all 0.15s;
   }

   /* Expand touch target for map dots */
   .map-dot::before {
     content: '';
     position: absolute;
     top: 50%;
     left: 50%;
     transform: translate(-50%, -50%);
     width: 44px;
     height: 44px;
     border-radius: 50%;
   }

   .map-dot.route { background: var(--lb-accent); width: 10px; height: 10px; }
   .map-dot.current {
     width: 16px;
     height: 16px;
     border: 2px solid var(--lb-yellow);
     box-shadow: 0 0 10px var(--lb-yellow);
   }
   ```

3. Update travel button minimum height:
   ```css
   .travel-btn {
     /* existing styles */
     min-height: 44px;  /* Add this */
   }
   ```

4. Update social tab buttons:
   ```css
   .social-tabs .stab {
     /* existing styles */
     min-height: 44px;  /* Add this */
   }
   ```

5. Update add friend button (`.add-btn`):
   ```css
   .add-btn {
     width: 44px;   /* Changed from 24px */
     height: 44px;  /* Changed from 24px */
     /* Keep other styles */
   }
   ```

6. Enhance the touch-friendly section (around line 837):
   ```css
   /* Touch-friendly tap targets - enhanced */
   @media (hover: none) {
     button, a, [role="button"] {
       min-height: 44px;
       min-width: 44px;
     }

     /* Touch feedback */
     button:active, a:active, [role="button"]:active {
       transform: scale(0.98);
       opacity: 0.9;
     }
   }
   ```
  </action>
  <verify>
Run these checks:
- `grep -n "touch-target" apps/web/src/app/globals.css` shows utility classes exist
- `grep -n "min-height: 44px" apps/web/src/app/globals.css` shows multiple occurrences
- `grep -A3 ".map-dot::before" apps/web/src/app/globals.css` shows pseudo-element expansion
  </verify>
  <done>Touch target utilities exist; map dots, buttons, and controls have 44px minimum</done>
</task>

<task type="auto">
  <name>Task 3: Verify build succeeds</name>
  <files>none</files>
  <action>
Run the Next.js build to verify no CSS syntax errors or TypeScript errors:

```bash
cd apps/web && npm run build
```

If build fails, fix the issues and re-run.
  </action>
  <verify>Build completes without errors</verify>
  <done>Build succeeds with updated touch targets</done>
</task>

</tasks>

<verification>
1. Button component has min-h-[44px] in base classes
2. Button sizes all produce 44px+ height
3. Map dots have expanded touch area via pseudo-element
4. Travel buttons, social tabs, add button all have 44px minimum
5. Build succeeds
</verification>

<success_criteria>
- LAYOUT-02 requirement met: Interactive elements have 44px minimum touch targets
- Button component enforces 44px on all variants
- Map dots are usable on touch devices
- Touch feedback provides visual response on tap
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/10-layout-responsiveness/10-02-SUMMARY.md`
</output>
