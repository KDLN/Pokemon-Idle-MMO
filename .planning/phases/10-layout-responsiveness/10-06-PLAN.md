---
phase: 10-layout-responsiveness
plan: 06
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/components/game/BoxPanel.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Box button is visible and tappable on mobile viewports"
    - "Box button does not overlap with mobile tab bar"
  artifacts:
    - path: "apps/web/src/components/game/BoxPanel.tsx"
      provides: "Box toggle button with responsive positioning"
      contains: "bottom-20"
  key_links:
    - from: "BoxPanel.tsx toggle button"
      to: "globals.css mobile tab bar (68px)"
      via: "responsive bottom positioning"
      pattern: "bottom-20|bottom-\\[72px\\]"
---

<objective>
Fix Box button accessibility on mobile devices

Purpose: The Box button uses `fixed bottom-4 right-4` (16px from bottom), but mobile layout has 68px padding-bottom for the tab bar. This causes the Box button to be hidden behind or overlapping with the tab bar, making it inaccessible.

Output: Box button positioned above the mobile tab bar on small viewports while maintaining desktop position.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Relevant gap from verification:
- Box button: `fixed bottom-4 right-4` = 16px from bottom
- Mobile tab bar: 68px height (added via padding-bottom on .game-layout)
- Result: Box button hidden behind or overlapping with tab bar

Fix approach: Use responsive Tailwind classes to position button higher on mobile.
- Mobile (<=1024px): `bottom-20` (80px) or `bottom-[72px]` to clear 68px tab bar
- Desktop (>1024px): Keep `bottom-4` (16px)

Tailwind responsive breakpoint: `lg:` prefix applies at 1024px and above.
Note: Tailwind's `lg:` is `min-width: 1024px`, so we use mobile-first approach:
- Default: bottom-20 (mobile)
- lg: bottom-4 (desktop)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add responsive bottom positioning to Box button</name>
  <files>apps/web/src/components/game/BoxPanel.tsx</files>
  <action>
In BoxPanel.tsx, find the toggle button (around line 127-141):

```tsx
<button
  onClick={() => setIsOpen(true)}
  className="fixed bottom-4 right-4 group flex items-center gap-2 px-4 py-2.5 rounded-xl bg-gradient-to-b from-[#3B4CCA] to-[#2A3A99] border border-[#5B6EEA]/30 shadow-lg shadow-[#3B4CCA]/30 hover:from-[#4B5CDA] hover:to-[#3A4AA9] transition-all duration-200 hover:scale-105"
>
```

Change the positioning classes from `bottom-4 right-4` to responsive positioning:

```tsx
<button
  onClick={() => setIsOpen(true)}
  className="fixed bottom-20 lg:bottom-4 right-4 group flex items-center gap-2 px-4 py-2.5 rounded-xl bg-gradient-to-b from-[#3B4CCA] to-[#2A3A99] border border-[#5B6EEA]/30 shadow-lg shadow-[#3B4CCA]/30 hover:from-[#4B5CDA] hover:to-[#3A4AA9] transition-all duration-200 hover:scale-105"
>
```

Breakdown:
- `bottom-20` = 80px from bottom (default, applies to mobile)
- `lg:bottom-4` = 16px from bottom (applies at 1024px+, desktop)
- `right-4` = 16px from right (unchanged, works for all viewports)

This clears the 68px mobile tab bar (80px > 68px gives 12px buffer).
  </action>
  <verify>
1. Run build: `npm run build` in apps/web - should complete without errors
2. Search for pattern: `grep -n "bottom-20 lg:bottom-4" apps/web/src/components/game/BoxPanel.tsx` should match
3. No other fixed bottom-4 positioning without responsive override in BoxPanel.tsx
  </verify>
  <done>
Box button uses responsive positioning: 80px from bottom on mobile (clearing tab bar), 16px on desktop.
  </done>
</task>

</tasks>

<verification>
1. Build passes without errors
2. Box button has responsive bottom classes in BoxPanel.tsx
3. On mobile viewport simulation, button would appear above the 68px tab bar zone
</verification>

<success_criteria>
- Box button positioned at bottom-20 (80px) on mobile viewports
- Box button positioned at bottom-4 (16px) on desktop viewports (1024px+)
- Button remains accessible and visible on all viewport sizes
- Build completes successfully
</success_criteria>

<output>
After completion, create `.planning/phases/10-layout-responsiveness/10-06-SUMMARY.md`
</output>
