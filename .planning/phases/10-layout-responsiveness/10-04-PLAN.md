---
phase: 10-layout-responsiveness
plan: 04
type: execute
wave: 3
depends_on: ["10-01", "10-02", "10-03"]
files_modified:
  - apps/web/src/app/globals.css
  - apps/web/src/components/game/GameShell.tsx
autonomous: false

must_haves:
  truths:
    - "Game screens work on 375px mobile viewport"
    - "Game screens work on 768px tablet viewport"
    - "Game screens work on 1280px+ desktop viewport"
    - "No horizontal overflow on any viewport"
    - "Mobile tab bar is usable on touch devices"
  artifacts:
    - path: "apps/web/src/app/globals.css"
      provides: "Responsive breakpoint fixes"
      contains: "@media (max-width:"
    - path: "apps/web/src/components/game/GameShell.tsx"
      provides: "Mobile-first layout logic"
      contains: "isMobile"
  key_links:
    - from: "GameShell.tsx"
      to: "globals.css"
      via: "CSS class application"
      pattern: "game-layout"
---

<objective>
Test and fix all game screens across mobile (375px), tablet (768px), and desktop (1280px+) viewports.

Purpose: LAYOUT-05, LAYOUT-06, LAYOUT-07 require all game screens to work on target viewports. This plan tests the changes from Plans 01-03 and fixes any remaining responsive issues.

Output: Fully responsive game screens verified on all target viewports with visual confirmation.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-layout-responsiveness/10-RESEARCH.md
@.planning/phases/10-layout-responsiveness/10-01-PLAN.md
@.planning/phases/10-layout-responsiveness/10-02-PLAN.md
@.planning/phases/10-layout-responsiveness/10-03-PLAN.md

@apps/web/src/app/globals.css
@apps/web/src/components/game/GameShell.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix mobile viewport-specific issues</name>
  <files>apps/web/src/app/globals.css</files>
  <action>
Add and update mobile-specific styles to ensure 375px viewport works:

1. In the mobile layout section (around line 2529), update:
   ```css
   @media (max-width: 1024px) {
     .game-layout {
       grid-template-columns: 1fr;
       grid-template-rows: auto auto 1fr;
       height: 100vh;
       height: 100dvh; /* Dynamic viewport height for mobile browsers */
       padding-bottom: 68px; /* Space for mobile tab bar */
       overflow: hidden;
     }
   }
   ```

2. Add extra-small viewport (375px) specific fixes:
   ```css
   /* Extra-small mobile (375px and below) */
   @media (max-width: 400px) {
     .game-layout {
       padding-bottom: 64px;
     }

     .mobile-tab-bar button {
       font-size: 8px;
       padding: 6px 2px;
     }

     .mobile-tab-bar .tab-icon {
       font-size: 16px;
     }

     .party-column.mobile-active .party-content {
       padding: 6px;
     }

     /* Tighter card spacing on very small screens */
     .party-column.mobile-active [class*="grid"] {
       gap: 4px;
     }

     .sidebar-header,
     .party-header {
       padding: 8px 10px;
     }

     .map-canvas {
       height: 130px;
     }

     .travel-btn {
       padding: 8px;
       font-size: 12px;
     }

     /* Ensure no horizontal overflow */
     .travel-btn .zone-name {
       font-size: 11px;
       overflow: hidden;
       text-overflow: ellipsis;
     }
   }
   ```

3. Add tablet-specific fixes (768px):
   ```css
   /* Tablet (768px) */
   @media (min-width: 768px) and (max-width: 1023px) {
     .game-layout {
       padding-bottom: 72px;
     }

     .mobile-tab-bar {
       padding: 10px 0;
     }

     .mobile-tab-bar button {
       font-size: 11px;
     }

     /* On tablet, show slightly larger party cards */
     .party-column.mobile-active .party-content {
       padding: 12px;
       max-width: 500px;
       margin: 0 auto;
     }
   }
   ```

4. Update hover-only media query to use proper syntax:
   ```css
   /* Hover-only interactions */
   @media (hover: hover) and (pointer: fine) {
     .travel-btn:hover {
       background: var(--lb-bg-hover);
       border-color: var(--lb-accent);
       color: var(--text-primary);
     }

     .map-dot.connected:not(:disabled):hover {
       transform: translate(-50%, -50%) scale(1.5);
     }

     .buff-item:hover {
       background: var(--lb-bg-hover);
       border-color: var(--lb-accent);
     }
   }
   ```
  </action>
  <verify>
Run these checks:
- `grep -n "max-width: 400px" apps/web/src/app/globals.css` shows extra-small breakpoint
- `grep -n "100dvh" apps/web/src/app/globals.css` shows dynamic viewport height
- `grep -n "min-width: 768px" apps/web/src/app/globals.css` shows tablet breakpoint
  </verify>
  <done>Mobile and tablet viewport-specific styles added</done>
</task>

<task type="auto">
  <name>Task 2: Ensure mobile tab bar meets touch targets</name>
  <files>apps/web/src/app/globals.css, apps/web/src/components/game/GameShell.tsx</files>
  <action>
Update mobile tab bar for proper touch targets and usability:

**In globals.css:**

1. Update `.mobile-tab-bar` (around line 2468):
   ```css
   .mobile-tab-bar {
     position: fixed;
     bottom: 0;
     left: 0;
     right: 0;
     display: flex;
     background: var(--bg-card);
     border-top: 1px solid var(--border-subtle);
     padding: 0;
     padding-bottom: env(safe-area-inset-bottom, 0px);
     z-index: 100;
   }

   .mobile-tab-bar button {
     flex: 1;
     display: flex;
     flex-direction: column;
     align-items: center;
     justify-content: center;
     gap: 2px;
     min-height: 56px; /* Taller than 44px for comfortable thumb use */
     padding: 8px 4px;
     background: transparent;
     border: none;
     color: var(--text-muted);
     font-family: inherit;
     font-size: 10px;
     cursor: pointer;
     transition: color 0.15s;
     -webkit-tap-highlight-color: transparent;
   }

   .mobile-tab-bar button:active {
     background: var(--lb-bg-elevated);
   }
   ```

2. Update tab badge positioning:
   ```css
   .mobile-tab-bar .tab-badge {
     position: absolute;
     top: 6px;
     right: calc(50% - 16px);
     min-width: 18px;
     height: 18px;
     padding: 0 5px;
     background: var(--lb-red);
     color: white;
     font-size: 10px;
     font-weight: 700;
     border-radius: 9px;
     display: flex;
     align-items: center;
     justify-content: center;
   }
   ```

**In GameShell.tsx:**

No changes needed - the existing MobileTabBar component structure is correct, just needs CSS updates.
  </action>
  <verify>
Run these checks:
- `grep -n "min-height: 56px" apps/web/src/app/globals.css` shows updated tab bar height
- `grep -n "webkit-tap-highlight-color" apps/web/src/app/globals.css` shows touch optimization
  </verify>
  <done>Mobile tab bar has proper touch targets and feedback</done>
</task>

<task type="auto">
  <name>Task 3: Build and run dev server</name>
  <files>none</files>
  <action>
Build and start the development server for visual testing:

```bash
cd apps/web && npm run build && npm run dev
```

Wait for the dev server to start, then note the URL (usually http://localhost:3000).

If build fails, fix issues and re-run.
  </action>
  <verify>Build succeeds and dev server starts</verify>
  <done>Development server running for visual testing</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Responsive layout system with:
- Fluid typography (16px-18px body text)
- 44px minimum touch targets on all interactive elements
- Party panel showing 6 Pokemon without scroll
- Activity log with content-based height
- Mobile (375px), tablet (768px), and desktop (1280px+) viewport support
  </what-built>
  <how-to-verify>
Test all viewports in browser DevTools (F12 -> Toggle device toolbar):

**Desktop (1280px):**
1. Open http://localhost:3000 in browser
2. Set viewport to 1280x800
3. Verify: 3-column layout displays correctly
4. Verify: Party panel shows all 6 Pokemon without scroll
5. Verify: Activity log fits without unnecessary scroll when few entries
6. Verify: All text is readable (16px+ body text)

**Tablet (768px):**
1. Set viewport to 768x1024
2. Verify: Mobile tab bar appears at bottom
3. Verify: Tapping Map/Game/Party/Social tabs switches content
4. Verify: Party panel (when selected) shows all 6 Pokemon
5. Verify: Touch targets feel appropriately sized

**Mobile (375px):**
1. Set viewport to 375x667 (iPhone SE)
2. Verify: No horizontal scroll (content fits width)
3. Verify: Mobile tab bar is usable (tabs are tappable)
4. Verify: Map dots are tappable (try clicking one)
5. Verify: Travel buttons meet touch targets
6. Verify: Text is readable (not too small)
7. Verify: Party cards show all 6 Pokemon when on Party tab

**Touch targets:**
1. On any viewport, verify buttons have visible 44px minimum
2. Use DevTools "Show rulers" or inspect element to confirm sizes
  </how-to-verify>
  <resume-signal>Type "approved" if all viewports work correctly, or describe specific issues found</resume-signal>
</task>

</tasks>

<verification>
1. All game screens render correctly at 375px width
2. All game screens render correctly at 768px width
3. All game screens render correctly at 1280px+ width
4. No horizontal overflow on any viewport
5. Touch targets are at least 44px
6. Mobile tab bar is easily usable
7. Visual confirmation from user
</verification>

<success_criteria>
- LAYOUT-05 requirement met: All game screens work on mobile viewport (375px width)
- LAYOUT-06 requirement met: All game screens work on tablet viewport (768px width)
- LAYOUT-07 requirement met: All game screens work on desktop viewport (1280px+ width)
- No horizontal overflow
- Touch targets are 44px minimum
- User approves visual verification
</success_criteria>

<output>
After completion, create `.planning/phases/10-layout-responsiveness/10-04-SUMMARY.md`
</output>
