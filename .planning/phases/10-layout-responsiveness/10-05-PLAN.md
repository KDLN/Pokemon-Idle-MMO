---
phase: 10-layout-responsiveness
plan: 05
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/components/game/GameShell.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Mobile tab bar appears at exactly 1024px viewport width"
    - "JavaScript mobile detection matches CSS breakpoint boundary"
  artifacts:
    - path: "apps/web/src/components/game/GameShell.tsx"
      provides: "Mobile detection with correct breakpoint"
      contains: "window.innerWidth <= 1024"
  key_links:
    - from: "GameShell.tsx checkMobile()"
      to: "globals.css @media (max-width: 1024px)"
      via: "matching boundary condition"
      pattern: "<= 1024"
---

<objective>
Fix 1024px breakpoint mismatch between JavaScript and CSS

Purpose: At exactly 1024px viewport width, CSS applies mobile styles (via `max-width: 1024px`) but JavaScript excludes 1024px (via `< 1024`), causing the mobile tab bar to not render while mobile CSS is active. This creates a broken layout state.

Output: Consistent breakpoint behavior where JS and CSS agree on mobile/desktop boundary.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Relevant gap from verification:
- CSS `@media (max-width: 1024px)` includes 1024px (inclusive)
- JS `window.innerWidth < 1024` excludes 1024px (exclusive)
- At exactly 1024px: CSS shows mobile layout, JS shows desktop content = broken

Fix approach: Change JS from `< 1024` to `<= 1024` to match CSS semantics.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix mobile detection breakpoint</name>
  <files>apps/web/src/components/game/GameShell.tsx</files>
  <action>
In GameShell.tsx, find the `checkMobile` function inside the useEffect hook (around line 512-519):

```typescript
useEffect(() => {
  const checkMobile = () => {
    setIsMobile(window.innerWidth < 1024)  // WRONG: excludes 1024px
  }
  checkMobile()
  window.addEventListener('resize', checkMobile)
  return () => window.removeEventListener('resize', checkMobile)
}, [])
```

Change the comparison from `< 1024` to `<= 1024`:

```typescript
useEffect(() => {
  const checkMobile = () => {
    setIsMobile(window.innerWidth <= 1024)  // CORRECT: includes 1024px like CSS
  }
  checkMobile()
  window.addEventListener('resize', checkMobile)
  return () => window.removeEventListener('resize', checkMobile)
}, [])
```

This ensures JS and CSS breakpoints match:
- CSS: `@media (max-width: 1024px)` = viewport width 0-1024px inclusive
- JS: `window.innerWidth <= 1024` = viewport width 0-1024 inclusive
  </action>
  <verify>
1. Run build: `npm run build` in apps/web - should complete without errors
2. Search for the pattern: `grep -n "innerWidth <= 1024" apps/web/src/components/game/GameShell.tsx` should match
3. Verify no other `innerWidth < 1024` patterns remain in GameShell.tsx
  </verify>
  <done>
GameShell.tsx uses `<= 1024` for mobile detection, matching CSS `max-width: 1024px` breakpoint.
  </done>
</task>

</tasks>

<verification>
1. Build passes without errors
2. `grep "innerWidth <= 1024"` finds the updated line in GameShell.tsx
3. No other mismatched breakpoint comparisons exist in the file
</verification>

<success_criteria>
- JavaScript mobile detection includes 1024px viewport width
- CSS and JS breakpoints agree on mobile/desktop boundary
- Build completes successfully
</success_criteria>

<output>
After completion, create `.planning/phases/10-layout-responsiveness/10-05-SUMMARY.md`
</output>
