---
phase: 10-layout-responsiveness
plan: 03
type: execute
wave: 2
depends_on: ["10-01", "10-02"]
files_modified:
  - apps/web/src/components/game/PartyPanel.tsx
  - apps/web/src/components/game/PokemonCard.tsx
  - apps/web/src/components/game/interactions/WorldLog.tsx
  - apps/web/src/app/globals.css
autonomous: true

must_haves:
  truths:
    - "Party panel shows all 6 Pokemon without scroll on standard viewports"
    - "Activity log fits available space without unnecessary scroll when few entries"
    - "Pokemon cards have appropriate sizing for 6 to fit in panel"
  artifacts:
    - path: "apps/web/src/components/game/PartyPanel.tsx"
      provides: "Responsive party grid"
      contains: "grid-cols-2"
    - path: "apps/web/src/components/game/interactions/WorldLog.tsx"
      provides: "Flex-based height activity log"
      contains: "max-h-"
    - path: "apps/web/src/app/globals.css"
      provides: "Party column responsive constraints"
      contains: ".party-content"
  key_links:
    - from: "PartyPanel.tsx"
      to: "globals.css"
      via: ".party-content wrapper"
      pattern: "party-content"
    - from: "WorldLog.tsx"
      to: "globals.css"
      via: ".activity-log wrapper"
      pattern: "activity-log"
---

<objective>
Optimize party panel and activity log layouts to fit content without unnecessary scroll.

Purpose: LAYOUT-03 requires activity log to fit available space without scroll when content allows. LAYOUT-04 requires party panel to show all 6 Pokemon without scroll. Current fixed heights cause these issues.

Output: Party panel with responsive card sizing that fits 6 Pokemon; activity log with flex-based height that expands/contracts based on content.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-layout-responsiveness/10-RESEARCH.md
@.planning/phases/10-layout-responsiveness/10-01-PLAN.md

@apps/web/src/components/game/PartyPanel.tsx
@apps/web/src/components/game/PokemonCard.tsx
@apps/web/src/components/game/interactions/WorldLog.tsx
@apps/web/src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Optimize party panel card sizing</name>
  <files>apps/web/src/components/game/PartyPanel.tsx, apps/web/src/components/game/PokemonCard.tsx</files>
  <action>
Update PartyPanel and PokemonCard to ensure 6 Pokemon fit without scroll:

**In PartyPanel.tsx:**

1. Update the grid container className to use tighter gaps and ensure proper row sizing:
   Change from:
   ```tsx
   className="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-2 gap-2 sm:gap-3 auto-rows-fr"
   ```
   To:
   ```tsx
   className="grid grid-cols-2 gap-2 auto-rows-fr"
   ```
   (Remove sm:grid-cols-3 - always use 2 columns for party panel to ensure consistent height)

2. Remove the Card wrapper's padding modifier - keep `padding="sm"` but update className:
   Change from:
   ```tsx
   <Card variant="glass" padding="sm" className="p-3 sm:p-4">
   ```
   To:
   ```tsx
   <Card variant="glass" padding="none" className="p-2 sm:p-3">
   ```

**In PokemonCard.tsx:**

1. In EmptyPokemonSlot, reduce minimum heights:
   Change from:
   ```tsx
   'relative rounded-xl overflow-hidden min-h-[120px] sm:min-h-[180px] h-full',
   ```
   To:
   ```tsx
   'relative rounded-xl overflow-hidden min-h-[100px] sm:min-h-[140px] h-full',
   ```

2. In the main PokemonCard component, find the content wrapper and update sprite sizing for compact display:
   - Sprite container: Change `w-14 h-14 sm:w-20 sm:h-20` to `w-12 h-12 sm:w-16 sm:h-16`
   - This reduces card height while keeping Pokemon visible

3. Update padding in the card content:
   Change `className="relative p-2 sm:p-3"` to `className="relative p-1.5 sm:p-2"`

Why: 6 cards in 2x3 grid with 140px per card = 420px + gaps + padding = ~460px. This fits in the party column without scroll on standard viewports.
  </action>
  <verify>
Run these checks:
- `grep -n "grid-cols-2 gap-2" apps/web/src/components/game/PartyPanel.tsx` shows simplified grid
- `grep -n "min-h-\[100px\]" apps/web/src/components/game/PokemonCard.tsx` shows reduced minimum
- `grep -n "w-12 h-12" apps/web/src/components/game/PokemonCard.tsx` shows reduced sprite size
  </verify>
  <done>Party panel cards sized to fit 6 Pokemon without scroll</done>
</task>

<task type="auto">
  <name>Task 2: Make activity log height content-responsive</name>
  <files>apps/web/src/components/game/interactions/WorldLog.tsx</files>
  <action>
Update WorldLog to use flex-based height instead of fixed height:

1. Update the main container div (currently `className="h-32 overflow-y-auto ..."`):
   Change from:
   ```tsx
   className="h-32 overflow-y-auto px-1 py-1 space-y-0.5 scrollbar-thin"
   ```
   To:
   ```tsx
   className="min-h-[60px] max-h-[160px] overflow-y-auto px-1 py-1 space-y-0.5 scrollbar-thin"
   ```

2. The WorldLog component should grow/shrink based on content:
   - With 0-1 entries: Shows ~60-80px (no scroll)
   - With 2-3 entries: Shows actual content height (no scroll)
   - With 4+ entries: Caps at 160px and scrolls

3. Update the empty state to be more compact:
   Change the empty state wrapper:
   ```tsx
   <div className="flex flex-col items-center justify-center h-full text-[#606080] text-sm">
   ```
   To:
   ```tsx
   <div className="flex flex-col items-center justify-center py-4 text-[#606080] text-sm">
   ```
   (Use py-4 instead of h-full to allow natural height)

4. Update LogEntryItem to be more compact:
   - Find the padding `px-3 py-2` and change to `px-2 py-1.5`
   - This reduces each entry height by ~8px

Why: Content-based height prevents empty space when few entries, scroll only appears when needed.
  </action>
  <verify>
Run these checks:
- `grep -n "min-h-\[60px\] max-h-\[160px\]" apps/web/src/components/game/interactions/WorldLog.tsx` shows new height constraints
- `grep -n "py-4" apps/web/src/components/game/interactions/WorldLog.tsx` shows updated empty state
  </verify>
  <done>Activity log uses flex-based height that fits content without unnecessary scroll</done>
</task>

<task type="auto">
  <name>Task 3: Update party column CSS constraints</name>
  <files>apps/web/src/app/globals.css</files>
  <action>
Update the party column and activity section CSS to support flex-based heights:

1. Find `.party-content` (around line 2189) and update:
   ```css
   .party-content {
     flex: 1 1 auto;
     overflow-y: auto;
     padding: 8px;
     min-height: 0;  /* Allow flex shrinking */
     /* Remove max-height: 50%; - let content determine height */
   }
   ```

2. Find `.activity-section` (around line 2291) and update:
   ```css
   .activity-section {
     flex: 0 1 auto;  /* Changed from flex: 1 1 auto */
     min-height: 80px;  /* Changed from 120px */
     max-height: 200px; /* Changed from 220px */
     display: flex;
     flex-direction: column;
     border-top: 1px solid var(--border-subtle);
   }
   ```

3. Find `.activity-log` (around line 2318) and update:
   ```css
   .activity-log {
     flex: 1;
     overflow-y: auto;
     padding: 8px;  /* Changed from 10px 12px */
     font-size: var(--font-size-sm); /* Use token instead of 11px */
   }
   ```

4. In the party column override section (around line 2405), update:
   ```css
   /* Party grid - 2 columns with proper gap */
   .game-layout .party-content [class*="grid"] {
     grid-template-columns: repeat(2, 1fr);
     gap: 8px;  /* Changed from 6px */
   }
   ```

Why: These constraints allow party content to take natural space while activity log flexes to fill remaining space without forced scroll.
  </action>
  <verify>
Run these checks:
- `grep -A5 ".party-content {" apps/web/src/app/globals.css` shows min-height: 0
- `grep -A6 ".activity-section {" apps/web/src/app/globals.css` shows updated constraints
- `grep -n "font-size: var(--font-size-sm)" apps/web/src/app/globals.css` shows token usage
  </verify>
  <done>Party column CSS uses flex-based layout allowing content-driven heights</done>
</task>

</tasks>

<verification>
1. Party panel shows 2x3 grid of Pokemon cards
2. All 6 cards visible without scroll on 768px+ viewport
3. Activity log shows content without scroll when 1-3 entries
4. Activity log scrolls when 4+ entries
5. Empty activity log shows compact empty state
6. Build succeeds
</verification>

<success_criteria>
- LAYOUT-03 requirement met: Activity log fits available space without scroll when content allows
- LAYOUT-04 requirement met: Pokemon party panel fits screen without scroll (6 Pokemon visible)
- Party cards are appropriately sized for compact display
- Activity log grows/shrinks based on content
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/10-layout-responsiveness/10-03-SUMMARY.md`
</output>
