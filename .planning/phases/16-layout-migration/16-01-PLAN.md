---
phase: 16-layout-migration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/components/game/GameShell.tsx
autonomous: true

must_haves:
  truths:
    - "Desktop game view shows zone content in upper portion (constrained height)"
    - "Desktop social sidebar fills remaining vertical space below zone"
    - "Zone content and social have visible gap between them"
  artifacts:
    - path: "apps/web/src/components/game/GameShell.tsx"
      provides: "Updated center column structure with balanced proportions"
      contains: "h-64 shrink-0"
  key_links:
    - from: "GameShell.tsx center-column"
      to: "WorldView/EncounterDisplay"
      via: "h-64 wrapper div"
      pattern: "h-64.*shrink-0"
    - from: "GameShell.tsx center-column"
      to: "SocialSidebar"
      via: "flex-1 min-h-0 wrapper"
      pattern: "flex-1.*min-h-0"
---

<objective>
Update GameShell desktop layout to match MockGameScreen's balanced proportions

Purpose: Apply the two-sidebar layout approved by user in Phase 15 theme exploration. Zone content gets constrained height (256px), social area expands to fill remaining space.

Output: GameShell.tsx with updated center column structure for desktop breakpoint (>1024px)
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/16-layout-migration/16-RESEARCH.md

# Key reference files
@apps/web/src/components/game/GameShell.tsx
@apps/web/src/components/game/MockGameScreen.tsx (lines 703-720 - target structure)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update desktop center column structure</name>
  <files>apps/web/src/components/game/GameShell.tsx</files>
  <action>
Update the desktop layout section (lines 603-613) to match MockGameScreen's center column pattern.

Current structure:
```tsx
<div className="center-column">
  <div className="game-world">
    {!hasEncounter ? <WorldView /> : <EncounterDisplay />}
    {isInTown && !hasEncounter && <TownMenu />}
  </div>

  <div className="social-section">
    <SocialSidebar onOpenTrade={handleOpenTrade} />
  </div>
</div>
```

Target structure:
```tsx
<div className="center-column">
  {/* Inner flex wrapper for padding and gap */}
  <div className="flex flex-col p-3 gap-3 min-w-0 overflow-hidden h-full">
    {/* Zone content - constrained height (256px) */}
    <div className="h-64 shrink-0">
      <div className="game-world h-full">
        {!hasEncounter ? <WorldView /> : <EncounterDisplay />}
        {isInTown && !hasEncounter && <TownMenu />}
      </div>
    </div>

    {/* Social - fills remaining space */}
    <div className="flex-1 min-h-0">
      <div className="social-section h-full">
        <SocialSidebar onOpenTrade={handleOpenTrade} />
      </div>
    </div>
  </div>
</div>
```

Key changes:
1. Add inner wrapper div with `flex flex-col p-3 gap-3 min-w-0 overflow-hidden h-full`
2. Wrap game-world in `h-64 shrink-0` container (constrains zone to 256px)
3. Add `h-full` to game-world div so it fills the constrained container
4. Wrap social-section in `flex-1 min-h-0` container (fills remaining space)
5. Add `h-full` to social-section div so it fills the flex container

DO NOT modify:
- Mobile layout section (lines 530-586) - mobile stays unchanged
- Child components (WorldView, EncounterDisplay, TownMenu, SocialSidebar)
- MapSidebar or PartyColumn
- Any other part of GameShell
  </action>
  <verify>
1. `npm run build` in apps/web completes without errors
2. Visual inspection at http://localhost:3000 on desktop (>1024px width):
   - Zone content area has fixed height (~256px)
   - Social sidebar fills remaining vertical space
   - 12px gap visible between zone and social sections
  </verify>
  <done>
Desktop layout shows zone content constrained to h-64 (256px) with social area expanded below, matching MockGameScreen proportions
  </done>
</task>

<task type="auto">
  <name>Task 2: Test desktop layout at multiple widths</name>
  <files>apps/web/src/components/game/GameShell.tsx</files>
  <action>
Verify the layout works correctly at various desktop widths using browser dev tools.

Test procedure:
1. Open http://localhost:3000 in browser
2. Open dev tools (F12) and toggle device toolbar
3. Test at these widths:
   - 1280px (standard desktop)
   - 1440px (large desktop)
   - 1920px (full HD)
   - 1025px (just above mobile breakpoint)

At each width, verify:
- Three columns visible (map sidebar | center | party sidebar)
- Center column shows zone content (top) + social (bottom)
- Zone content area does NOT grow beyond ~256px height
- Social area expands to fill remaining vertical space
- No horizontal overflow or scrollbars appear
- Content is readable and properly spaced

If any issues found, adjust the Tailwind classes in the center column structure.
  </action>
  <verify>
Visual inspection confirms layout works at 1025px, 1280px, 1440px, and 1920px widths with:
- Balanced proportions (zone constrained, social expanded)
- No layout breaks or overflow issues
  </verify>
  <done>
Desktop layout verified working at all standard desktop breakpoints (1025px through 1920px)
  </done>
</task>

</tasks>

<verification>
- `npm run build` completes without errors
- Desktop browser at >1024px shows:
  - Zone content area with ~256px height
  - Social area filling remaining vertical space
  - 12px gap between sections
  - No horizontal overflow
</verification>

<success_criteria>
- GameShell desktop layout matches MockGameScreen proportions
- Zone content constrained (h-64 = 256px)
- Social area expanded (flex-1)
- Build passes with no errors
- Layout stable at all desktop widths (1025px-1920px)
</success_criteria>

<output>
After completion, create `.planning/phases/16-layout-migration/16-01-SUMMARY.md`
</output>
