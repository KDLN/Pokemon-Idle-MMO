---
phase: 17-theme-styling
plan: 03
type: execute
wave: 2
depends_on: ["17-01", "17-02"]
files_modified:
  - apps/web/src/components/game/world/WorldView.tsx
  - apps/web/src/components/game/interactions/TownMenu.tsx
  - apps/web/src/components/game/ShopPanel.tsx
  - apps/web/src/components/game/social/ChatInput.tsx
  - apps/web/src/app/globals.css
autonomous: true

must_haves:
  truths:
    - "Primary action buttons use beveled 3D styling"
    - "Form inputs have subtle inset/border appearance"
    - "Button colors follow action semantics (green=confirm, red=destructive, blue=neutral)"
  artifacts:
    - path: "apps/web/src/components/game/interactions/TownMenu.tsx"
      provides: "Town menu actions using BeveledButton"
      contains: "BeveledButton"
    - path: "apps/web/src/components/game/social/ChatInput.tsx"
      provides: "Chat input with inset styling"
      min_lines: 40
    - path: "apps/web/src/app/globals.css"
      provides: "Input inset utility class"
      contains: "input-inset"
  key_links:
    - from: "apps/web/src/components/game/interactions/TownMenu.tsx"
      to: "apps/web/src/components/ui/Button.tsx"
      via: "BeveledButton import and usage"
      pattern: "import.*BeveledButton.*from"
---

<objective>
Apply BeveledButton styling to primary action buttons and add subtle inset styling to form inputs for a physical/retro feel.

Purpose: BeveledButton provides the tactile, physical button aesthetic established in MockGameScreen. Consistent action-based colors (green/red/blue) create clear visual hierarchy. Inset inputs complement the beveled buttons, maintaining the retro-physical aesthetic throughout interactive elements.

Output: Primary actions use BeveledButton with semantic colors, form inputs have subtle inset appearance.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/17-theme-styling/17-CONTEXT.md
@.planning/phases/17-theme-styling/17-RESEARCH.md
@apps/web/src/components/ui/Button.tsx
@apps/web/src/components/game/MockGameScreen.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Apply BeveledButton to Zone Action Buttons</name>
  <files>
    apps/web/src/components/game/world/WorldView.tsx
    apps/web/src/components/game/interactions/TownMenu.tsx
  </files>
  <action>
**Context from CONTEXT.md:**
- Lean retro/physical - default to beveled buttons where reasonable
- Action-based colors: green for confirm, red for destructive, blue for neutral
- Header navigation buttons stay special (already done in Header.tsx)

**Reference from MockGameScreen (MockWorldView):**
```tsx
<div className="flex gap-3 justify-center">
  <BeveledButton hue={120} saturation={60} lightness={40}>
    Search Area
  </BeveledButton>
  <BeveledButton hue={200} saturation={60} lightness={45}>
    Use Item
  </BeveledButton>
</div>
```

**WorldView.tsx updates:**

WorldView currently doesn't have action buttons (they're in TownMenu), but if any action buttons are added to the zone view in the future, use BeveledButton. For now, no changes needed to WorldView action buttons.

**TownMenu.tsx updates:**

TownMenu.tsx has buttons for town interactions (Shop, Gym, etc.). Convert these to BeveledButton.

1. Import BeveledButton:
```tsx
import { BeveledButton } from '@/components/ui/Button'
```

2. Find existing button elements for town actions and convert them:

**Color guide for BeveledButton:**
- Shop: green (hue=120) - positive/commerce action
- Gym Challenge: red (hue=0 or 10) - combat/challenging action
- Heal (Pokemon Center): blue (hue=200) - utility/support action
- Museum/Other: blue (hue=220) - neutral/informational

**Example conversion:**
```tsx
// Before
<button
  onClick={() => setShowShop(true)}
  className="flex items-center gap-2 px-4 py-2 bg-gradient-to-b from-[#3B4CCA] to-[#2B3CBA] ..."
>
  Shop
</button>

// After
<BeveledButton
  onClick={() => setShowShop(true)}
  hue={120}
  saturation={60}
  lightness={40}
>
  <span className="flex items-center gap-2">
    <ShopIcon className="w-4 h-4" />
    Shop
  </span>
</BeveledButton>
```

**Important notes:**
- BeveledButton uses HSL color system (hue, saturation, lightness)
- Green: hue=120, saturation=60, lightness=40
- Blue: hue=200-240, saturation=60, lightness=45-50
- Red: hue=0-10, saturation=70, lightness=45
- Keep any icons inside the button content
- BeveledButton already has min-h-[44px] for touch targets
  </action>
  <verify>
1. Navigate to a town zone (e.g., Pallet Town, Pewter City)
2. Confirm town menu buttons display 3D beveled styling
3. Test hover state - button should "lift" (translateY animation)
4. Test click/active state - button should "press down"
5. Confirm Shop button is green, Gym is red, other actions are blue
  </verify>
  <done>Town menu action buttons use BeveledButton with semantic action colors</done>
</task>

<task type="auto">
  <name>Task 2: Apply BeveledButton to Shop Panel Actions</name>
  <files>apps/web/src/components/game/ShopPanel.tsx</files>
  <action>
ShopPanel.tsx contains buy/sell buttons that are prime candidates for BeveledButton styling.

1. Import BeveledButton:
```tsx
import { Button, BeveledButton } from '@/components/ui/Button'
```

2. Convert primary action buttons to BeveledButton:

**Buy button (green - confirms purchase):**
```tsx
<BeveledButton
  onClick={() => handleBuy(item)}
  hue={120}
  saturation={60}
  lightness={40}
  disabled={!canAfford}
>
  Buy
</BeveledButton>
```

**Sell button (if present - could be red for "destructive" or blue for neutral):**
Use blue (hue=200) for sell since it's not destructive, just a transaction.

**Close/Cancel button:**
Keep as regular Button (secondary variant) or use a muted BeveledButton (hue=220, lower saturation=40).

**Quantity buttons (+/-):**
These are small and don't need beveled treatment - keep as regular buttons or icon buttons.

**Price display and labels:**
Not buttons - no changes needed.
  </action>
  <verify>
1. Open the shop panel (in a town)
2. Confirm Buy buttons have green beveled 3D styling
3. Test hover/click states on Buy buttons
4. Confirm disabled state (can't afford) shows grayed out beveled button
5. Quantity controls remain functional
  </verify>
  <done>Shop panel Buy buttons use green BeveledButton, maintaining purchase action visibility</done>
</task>

<task type="auto">
  <name>Task 3: Add Inset Styling to Form Inputs</name>
  <files>
    apps/web/src/components/game/social/ChatInput.tsx
    apps/web/src/app/globals.css
  </files>
  <action>
**Context from CONTEXT.md:**
Form inputs have subtle inset/border look to match the physical button aesthetic.

**Add input-inset utility class to globals.css:**

Add after the existing button styles (around line 150):
```css
/* Form input inset styling - physical feel to match beveled buttons */
.input-inset {
  background: var(--color-surface-base);
  border: 1px solid var(--color-border-subtle);
  box-shadow:
    inset 0 2px 4px rgba(0, 0, 0, 0.2),
    inset 0 1px 2px rgba(0, 0, 0, 0.1);
  transition: border-color 0.2s, box-shadow 0.2s;
}

.input-inset:focus {
  border-color: var(--color-brand-primary);
  box-shadow:
    inset 0 2px 4px rgba(0, 0, 0, 0.2),
    inset 0 1px 2px rgba(0, 0, 0, 0.1),
    0 0 0 2px rgba(75, 92, 218, 0.2);
  outline: none;
}

.input-inset::placeholder {
  color: var(--color-text-muted);
}
```

**ChatInput.tsx updates:**

Find the text input element and add the `input-inset` class:

```tsx
// Before (example)
<input
  type="text"
  placeholder="Type a message..."
  className="flex-1 px-3 py-2 rounded-lg bg-[#1a1a2e] border border-[#2a2a4a] text-xs ..."
/>

// After
<input
  type="text"
  placeholder="Type a message..."
  className="input-inset flex-1 px-3 py-2 rounded-lg text-xs text-[var(--color-text-primary)]"
/>
```

The input-inset class handles background, border, and box-shadow - so remove any conflicting inline bg/border colors.

**Also check these files for inputs that could use input-inset:**
- social/AddFriend.tsx (friend username input)
- TradeModal.tsx (if it has search/filter inputs)
- Any filter/search inputs in other panels

For this task, focus on ChatInput.tsx as the primary example. Other inputs can be updated in follow-up work.
  </action>
  <verify>
1. Open the chat sidebar
2. Focus on the chat input field
3. Confirm the input has a subtle inset shadow (pressed-in appearance)
4. Confirm focus state shows brand-primary colored ring
5. Type text - confirm text is readable with proper contrast
6. Confirm placeholder text is visible but muted
  </verify>
  <done>Chat input has inset styling matching the physical/retro aesthetic, focus state is clear</done>
</task>

</tasks>

<verification>
- [ ] TownMenu buttons use BeveledButton with semantic colors
- [ ] Shop Buy buttons use green BeveledButton
- [ ] BeveledButton hover/active states work correctly
- [ ] BeveledButton disabled state shows grayed styling
- [ ] Chat input has `input-inset` class applied
- [ ] Input inset shadow visible (subtle pressed-in look)
- [ ] Input focus state shows brand-primary ring
- [ ] All buttons maintain 44px minimum touch target
</verification>

<success_criteria>
Primary action buttons throughout the game use the tactile BeveledButton styling with consistent action-based colors. Form inputs have a complementary inset appearance that reinforces the physical/retro aesthetic.
</success_criteria>

<output>
After completion, create `.planning/phases/17-theme-styling/17-03-SUMMARY.md`
</output>
