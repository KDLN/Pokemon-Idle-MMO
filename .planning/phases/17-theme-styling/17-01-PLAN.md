---
phase: 17-theme-styling
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/app/layout.tsx
  - apps/web/src/components/game/Header.tsx
  - apps/web/src/components/game/GameShell.tsx
  - apps/web/src/components/game/PokemonCard.tsx
  - apps/web/src/components/game/PartyPanel.tsx
  - apps/web/src/components/ui/Card.tsx
  - apps/web/src/components/ui/Badge.tsx
autonomous: true

must_haves:
  truths:
    - "Modern theme colors are active when viewing the game"
    - "No hardcoded hex colors visible in core UI components"
    - "CSS variables cascade correctly to all nested components"
  artifacts:
    - path: "apps/web/src/app/layout.tsx"
      provides: "data-theme=\"modern\" on body element"
      contains: "data-theme=\"modern\""
    - path: "apps/web/src/components/game/Header.tsx"
      provides: "Header using CSS variables instead of hex colors"
      min_lines: 150
    - path: "apps/web/src/components/game/PokemonCard.tsx"
      provides: "Pokemon cards using CSS variable colors"
      min_lines: 250
  key_links:
    - from: "apps/web/src/app/layout.tsx"
      to: "colors-modern.css"
      via: "data-theme attribute triggers CSS variable overrides"
      pattern: "data-theme.*modern"
---

<objective>
Enable Modern theme globally and migrate core component colors from hardcoded hex to CSS variables.

Purpose: Activating the Modern theme unlocks all the color tokens defined in colors-modern.css. Migrating core components ensures the foundational UI elements use the theme system, enabling consistent visual styling throughout the app.

Output: Modern theme active on production game with core components (Header, GameShell, PokemonCard, PartyPanel, Card, Badge) using CSS variables.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/17-theme-styling/17-CONTEXT.md
@.planning/phases/17-theme-styling/17-RESEARCH.md
@apps/web/src/styles/tokens/colors-modern.css
@apps/web/src/components/game/MockGameScreen.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enable Modern Theme Globally</name>
  <files>apps/web/src/app/layout.tsx</files>
  <action>
Add `data-theme="modern"` attribute to the body element in layout.tsx.

The body element currently has: `className={\`${outfit.variable} ${pressStart2P.variable} antialiased\`}`

Update it to include the data-theme attribute:
```tsx
<body
  data-theme="modern"
  className={`${outfit.variable} ${pressStart2P.variable} antialiased`}
>
```

This single change activates all CSS variable overrides defined in colors-modern.css.
  </action>
  <verify>
Run the dev server (`npm run dev` in apps/web) and inspect the body element in browser DevTools. Confirm `data-theme="modern"` is present and CSS variables like `--color-surface-base` resolve to Modern theme values (e.g., #141820 instead of base theme values).
  </verify>
  <done>Body element has data-theme="modern" attribute, Modern theme CSS variables are active</done>
</task>

<task type="auto">
  <name>Task 2: Migrate Core Component Colors to CSS Variables</name>
  <files>
    apps/web/src/components/game/Header.tsx
    apps/web/src/components/game/GameShell.tsx
    apps/web/src/components/game/PokemonCard.tsx
    apps/web/src/components/game/PartyPanel.tsx
    apps/web/src/components/ui/Card.tsx
    apps/web/src/components/ui/Badge.tsx
  </files>
  <action>
Replace hardcoded hex colors with CSS variables in these core components. Reference MockGameScreen.tsx for the target styling patterns.

**Color Mappings (use these consistently):**

Surface colors:
- `#0f0f1a`, `#0a0a12` -> `var(--color-surface-base)`
- `#1a1a2e`, `#1c2230` -> `var(--color-surface-elevated)`
- `#252542`, `#252d3d` -> `var(--color-surface-hover)`

Border colors:
- `#2a2a4a`, `#2a3348` -> `var(--color-border-subtle)`
- `#3a3a6a`, `#3a4568` -> `var(--color-border-bright)`

Text colors:
- `#ffffff`, white text -> `var(--color-text-primary)`
- `#a0a0c0`, `#b0b8d0` -> `var(--color-text-secondary)`
- `#606080`, `#707890` -> `var(--color-text-muted)`

Brand colors:
- `#3B4CCA` (blue) -> `var(--color-brand-primary)`
- `#5B6EEA` (light blue) -> `var(--color-brand-primary-light)`
- `#EE1515`, `#CC0000` (red) -> `var(--color-brand-secondary)`
- `#FF4444` (light red) -> `var(--color-brand-secondary-light)`
- `#FFDE00`, `#FFE633` (yellow) -> `var(--color-brand-accent)`

**Specific file instructions:**

Header.tsx (~21 hex colors):
- Keep the unique Pokedex/Leaderboard button gradients per CONTEXT.md (brand identity)
- Migrate dividers, borders, text colors to CSS variables
- Update `#2a2a4a` dividers to `var(--color-border-subtle)`
- Update `#a0a0c0` text to `var(--color-text-secondary)`

GameShell.tsx (~8 hex colors):
- Loading spinner colors can stay hardcoded (Pokeball red is brand)
- Migrate direction arrow color `#a0a0c0` to `var(--color-text-secondary)`
- Migrate no-boost text `#606080` to `var(--color-text-muted)`

PokemonCard.tsx (~23 hex colors):
- Keep type-specific colors from speciesData.color (these are dynamic)
- Migrate background colors: `#1a1a2e` -> `var(--color-surface-elevated)`
- Migrate border colors: `#2a2a4a` -> `var(--color-border-subtle)`, `#3a3a6a` -> `var(--color-border-bright)`
- Migrate text: `#a0a0c0` -> `var(--color-text-secondary)`, `#606080` -> `var(--color-text-muted)`

PartyPanel.tsx (~2 hex colors):
- Migrate star colors: `#FFDE00` -> `var(--color-brand-accent)`, `#2a2a4a` -> `var(--color-border-subtle)`
- Migrate text: `#a0a0c0` -> `var(--color-text-secondary)`

Card.tsx and Badge.tsx:
- Check for any hardcoded colors and migrate to CSS variables
- These should already use variables from the design system, but verify

**Pattern to follow (from MockGameScreen):**
```tsx
// Before
<div className="text-[#a0a0c0]">

// After
<div className="text-[var(--color-text-secondary)]">

// Before
<div className="bg-[#1a1a2e] border-[#2a2a4a]">

// After
<div className="bg-[var(--color-surface-elevated)] border-[var(--color-border-subtle)]">
```
  </action>
  <verify>
1. Run `npm run lint` - no errors
2. Run `npm run build` - builds successfully
3. Manually inspect each component in browser - colors should match MockGameScreen aesthetic
4. Use DevTools to verify CSS variables are being used (not hardcoded values)
  </verify>
  <done>Core components (Header, GameShell, PokemonCard, PartyPanel, Card, Badge) use CSS variables for all surface, border, text, and brand colors. Visual appearance matches Modern theme.</done>
</task>

</tasks>

<verification>
- [ ] `data-theme="modern"` present on body element in production build
- [ ] No hardcoded hex colors in Header.tsx (except brand Pokedex/Leaderboard buttons)
- [ ] No hardcoded hex colors in GameShell.tsx (except loading spinner Pokeball)
- [ ] No hardcoded hex colors in PokemonCard.tsx (except dynamic type colors)
- [ ] CSS variables cascade to nested components
- [ ] Visual appearance consistent with MockGameScreen theme
</verification>

<success_criteria>
Modern theme is active globally. Core UI components use CSS variables instead of hardcoded hex colors. The game's visual appearance shifts from the base theme to the Modern theme's warmer, more saturated palette.
</success_criteria>

<output>
After completion, create `.planning/phases/17-theme-styling/17-01-SUMMARY.md`
</output>
