---
phase: 17-theme-styling
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/components/game/PokemonCard.tsx
  - apps/web/src/components/game/PartyPanel.tsx
  - apps/web/src/components/game/BoostCard.tsx
  - apps/web/src/components/game/world/WorldView.tsx
  - apps/web/src/app/globals.css
autonomous: true

must_haves:
  truths:
    - "Pokemon cards display a type-colored background overlay"
    - "Cards and panels have subtle noise texture"
    - "Sidebars have subtle vertical gradient (darker at bottom)"
    - "Zone view displays ambient floating particles"
  artifacts:
    - path: "apps/web/src/components/game/PokemonCard.tsx"
      provides: "Pokemon cards with type-colored background and texture"
      contains: "texture-noise"
    - path: "apps/web/src/components/game/world/WorldView.tsx"
      provides: "Zone view with ambient particles"
      min_lines: 170
    - path: "apps/web/src/app/globals.css"
      provides: "Sidebar gradient utility class"
      contains: "sidebar-gradient"
  key_links:
    - from: "apps/web/src/components/game/PokemonCard.tsx"
      to: "styles/noise-texture.css"
      via: "texture-noise class application"
      pattern: "texture-noise"
    - from: "apps/web/src/components/game/world/WorldView.tsx"
      to: "MockGameScreen ambient particles"
      via: "animated particle elements"
      pattern: "animate-pulse"
---

<objective>
Apply texture-noise to cards/panels, add type-colored Pokemon card backgrounds, implement sidebar gradients, and add ambient particles to zone view.

Purpose: These visual treatments give the UI a tactile, retro-physical feel as established in MockGameScreen. Texture noise adds depth to flat surfaces, type colors make Pokemon cards more distinctive, and ambient particles bring the zone view to life.

Output: Cards have subtle noise texture, Pokemon cards show type-colored backgrounds, sidebars have vertical gradients, zone view has floating ambient particles.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/17-theme-styling/17-CONTEXT.md
@.planning/phases/17-theme-styling/17-RESEARCH.md
@apps/web/src/styles/noise-texture.css
@apps/web/src/components/game/MockGameScreen.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Apply Type-Colored Backgrounds and Texture to Pokemon Cards</name>
  <files>apps/web/src/components/game/PokemonCard.tsx</files>
  <action>
Update PokemonCard.tsx to add:
1. `texture-noise` class to card wrapper
2. Type-colored background overlay (matching MockGameScreen pattern)

**Reference from MockGameScreen (MockPokemonCard):**
```tsx
<div className="texture-noise p-2 rounded-lg bg-[var(--color-surface-elevated)] border border-[var(--color-border-subtle)] hover:border-[var(--color-border-bright)] transition-colors cursor-pointer group">
  {/* Pokemon sprite */}
  <div className="w-full aspect-square rounded-lg bg-[var(--color-surface-base)] mb-2 flex items-center justify-center relative overflow-hidden">
    <div
      className="absolute inset-0 opacity-20"
      style={{ backgroundColor: TYPE_COLORS[pokemon.type] }}
    />
    {/* sprite img */}
  </div>
```

**Implementation for PokemonCard.tsx:**

For the full card variant (non-compact), update the sprite container to include a type-colored overlay:
```tsx
{/* Pokemon Sprite */}
<div className="relative flex justify-center mb-2 sm:mb-3">
  <div className="relative">
    {/* Type-colored background overlay */}
    <div
      className="absolute inset-0 rounded-lg opacity-20"
      style={{ backgroundColor: isShiny ? '#FFD700' : speciesData.color }}
    />
    {/* Glow effect */}
    <div
      className={cn('absolute inset-0 blur-xl opacity-30 scale-75', isShiny && 'animate-pulse')}
      style={{ backgroundColor: isShiny ? '#FFD700' : speciesData.color }}
    />
    <img ... />
  </div>
</div>
```

Add `texture-noise` class to the main card container:
```tsx
// Full card
<div
  onClick={onClick}
  role="article"
  className={cn(
    'texture-noise group relative rounded-xl overflow-hidden transition-all duration-300 h-full',
    // ... rest of classes
  )}
>
```

For compact variant, also add texture-noise:
```tsx
// Compact card
<div
  onClick={onClick}
  className={cn(
    'texture-noise group relative flex items-center gap-2 sm:gap-3 p-2 sm:p-2.5 rounded-xl cursor-pointer transition-all duration-200',
    // ... rest of classes
  )}
>
```

**Important:** The `texture-noise` class requires `position: relative` or `isolation: isolate` on the parent. The existing `relative` class on cards satisfies this.
  </action>
  <verify>
1. View a Pokemon card in the party panel
2. Confirm the sprite background shows a subtle type-colored overlay (e.g., Electric types have yellow tint)
3. Confirm noise texture is visible on card background when zoomed in
4. Test both compact and full card variants
  </verify>
  <done>Pokemon cards show type-colored background overlay on sprite area and have noise texture applied</done>
</task>

<task type="auto">
  <name>Task 2: Add Texture to Panels and Sidebar Gradients</name>
  <files>
    apps/web/src/components/game/PartyPanel.tsx
    apps/web/src/components/game/BoostCard.tsx
    apps/web/src/app/globals.css
  </files>
  <action>
**Add texture-noise to PartyPanel and BoostCard:**

PartyPanel.tsx - Add texture-noise to the Card wrapper:
```tsx
<Card variant="glass" padding="none" className="texture-noise p-2 sm:p-3">
```

BoostCard.tsx - Add texture-noise to the boost card container:
```tsx
// Find the main container div and add texture-noise class
<div className="texture-noise p-2.5 rounded-lg bg-gradient-to-r ...">
```

**Add sidebar gradient utility to globals.css:**

Add this utility class after the existing utility classes (around line 100-120):
```css
/* Sidebar vertical gradient - darker at bottom */
.sidebar-gradient {
  background: linear-gradient(
    to bottom,
    var(--color-surface-elevated) 0%,
    var(--color-surface-base) 100%
  );
}
```

**Note:** The sidebar components in GameShell use CSS classes defined in globals.css via the Layout-B section. The sidebar gradient should be applied to `.map-sidebar` and `.party-column` containers. Search globals.css for these class definitions and update them to include the gradient background OR add the gradient directly to the utility class that can be used inline.

If the Layout-B styles use component-scoped CSS, update those definitions to include:
```css
.map-sidebar {
  /* existing styles */
  background: linear-gradient(to bottom, var(--color-surface-elevated) 0%, var(--color-surface-base) 100%);
}

.party-column {
  /* existing styles */
  background: linear-gradient(to bottom, var(--color-surface-elevated) 0%, var(--color-surface-base) 100%);
}
```
  </action>
  <verify>
1. View the party panel - confirm noise texture is visible
2. Activate a guild boost - confirm boost card has noise texture
3. Check sidebars (map sidebar, party column) - confirm subtle vertical gradient (top slightly lighter than bottom)
4. Test on both desktop and mobile layouts
  </verify>
  <done>PartyPanel and BoostCard have texture-noise applied, sidebars display subtle vertical gradient</done>
</task>

<task type="auto">
  <name>Task 3: Add Ambient Particles to Zone View</name>
  <files>apps/web/src/components/game/world/WorldView.tsx</files>
  <action>
Add ambient floating particles to the WorldView component, matching the pattern from MockGameScreen's MockWorldView.

**Reference from MockGameScreen:**
```tsx
{/* Ambient particles */}
<div className="absolute top-10 left-10 w-1 h-1 rounded-full bg-green-300/50 animate-pulse" />
<div className="absolute top-20 right-16 w-1.5 h-1.5 rounded-full bg-yellow-300/40 animate-pulse" />
<div className="absolute bottom-24 left-20 w-1 h-1 rounded-full bg-green-400/50 animate-pulse" />
<div className="absolute top-32 left-1/4 w-1 h-1 rounded-full bg-emerald-300/40 animate-pulse" />
<div className="absolute bottom-16 right-1/4 w-1.5 h-1.5 rounded-full bg-lime-300/30 animate-pulse" />
```

**Implementation:**

Add ambient particles inside the WorldView component, positioned within the main container after the trainer/pokemon elements. Particles should only show when in a route/forest zone (not in towns).

```tsx
{/* Ambient particles - only on routes/forests */}
{isRoute && (
  <>
    <div className="absolute top-6 left-8 w-1 h-1 rounded-full bg-green-300/50 animate-pulse" aria-hidden="true" />
    <div className="absolute top-12 right-12 w-1.5 h-1.5 rounded-full bg-yellow-300/40 animate-pulse" aria-hidden="true" />
    <div className="absolute bottom-16 left-16 w-1 h-1 rounded-full bg-green-400/50 animate-pulse" aria-hidden="true" />
    <div className="absolute top-20 left-1/4 w-1 h-1 rounded-full bg-emerald-300/40 animate-pulse" aria-hidden="true" />
    <div className="absolute bottom-12 right-1/4 w-1.5 h-1.5 rounded-full bg-lime-300/30 animate-pulse" aria-hidden="true" />
  </>
)}
```

Place these after the trainer/pokemon rendering block but before the status overlay:
```tsx
{/* Trainer and Pokemon */}
<div className="absolute inset-0">
  {/* existing trainer/pokemon code */}
</div>

{/* Ambient particles - only on routes/forests */}
{isRoute && (
  // particles here
)}

{/* Status overlay */}
<div className="absolute bottom-2 left-2 right-2 ...">
```

**Optionally:** Add zone-type-aware particle colors:
- Forest zones: green/emerald particles
- Route zones: mix of green/yellow particles
- Water routes (if any): blue particles

Keep it simple for now - the green/yellow mix works for all route types.
  </action>
  <verify>
1. Navigate to a route zone (e.g., Route 1, Viridian Forest)
2. Confirm 5 small floating particles are visible with subtle pulse animation
3. Navigate to a town zone
4. Confirm particles are NOT visible in towns
5. Particles should not interfere with trainer/pokemon visibility
  </verify>
  <done>Zone view displays ambient floating particles on route/forest zones, creating a more atmospheric feel</done>
</task>

</tasks>

<verification>
- [ ] Pokemon cards (full and compact) have `texture-noise` class
- [ ] Pokemon cards show type-colored background overlay on sprite area
- [ ] PartyPanel card wrapper has `texture-noise` class
- [ ] BoostCard has `texture-noise` class
- [ ] Sidebars (map-sidebar, party-column) have vertical gradient (darker at bottom)
- [ ] WorldView shows 5 ambient particles on route/forest zones
- [ ] Particles hidden in town zones
- [ ] All changes maintain mobile responsiveness
</verification>

<success_criteria>
Cards and panels have tactile noise texture. Pokemon cards prominently display their type via background color overlay. Sidebars have subtle depth from vertical gradient. Zone view feels more alive with ambient floating particles.
</success_criteria>

<output>
After completion, create `.planning/phases/17-theme-styling/17-02-SUMMARY.md`
</output>
