---
phase: 13-map-overhaul
plan: 07
type: execute
wave: 5
depends_on: ["13-06"]
files_modified:
  - apps/web/src/components/game/map/MapFrame.tsx
  - apps/web/src/components/game/map/InteractiveMap.tsx
  - apps/web/src/app/globals.css
  - apps/web/src/components/game/map/ZoneNode.tsx
  - apps/web/src/components/game/map/MapCanvas.tsx
autonomous: false

must_haves:
  truths:
    - "Map has Pokemon-style decorative frame"
    - "Visual styling matches Gen 4-5 handheld aesthetic"
    - "User confirms map looks good across viewport sizes"
  artifacts:
    - path: "apps/web/src/components/game/map/MapFrame.tsx"
      provides: "Decorative Pokemon-style border"
      exports: ["MapFrame"]
    - path: "apps/web/src/app/globals.css"
      provides: "Map-specific CSS classes"
      contains: ".map-frame"
  key_links:
    - from: "InteractiveMap.tsx"
      to: "MapFrame.tsx"
      via: "wraps entire map component"
      pattern: "MapFrame"
---

<objective>
Add Pokemon-style visual polish: decorative frame, refined styling, and final visual adjustments.

Purpose: Make the map feel like an authentic part of the Pokemon game experience.
Output: Polished map with decorative frame, Gen 4-5 styling, and visual verification.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/13-map-overhaul/13-CONTEXT.md
@.planning/phases/13-map-overhaul/13-06-SUMMARY.md
@apps/web/src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create MapFrame decorative component</name>
  <files>apps/web/src/components/game/map/MapFrame.tsx, apps/web/src/app/globals.css</files>
  <action>
    Create Pokemon-style decorative frame around the map:

    1. Create MapFrame.tsx:
       - Wrapper component with decorative border
       - Props: children (map content)

    2. Frame design (Gen 4-5 handheld style):
       - Rounded outer border with gradient
       - Inner shadow for depth
       - Corner accents or pokeball motifs (subtle)
       - Color: Use existing poke-border pattern as base
       - Consider double-border effect (inner/outer)

    3. Add CSS classes to globals.css:
       ```css
       .map-frame {
         position: relative;
         border: 4px solid var(--border-bright);
         border-radius: 16px;
         background: linear-gradient(180deg,
           var(--color-surface-elevated) 0%,
           var(--color-surface-base) 100%
         );
         box-shadow:
           0 4px 20px rgba(0, 0, 0, 0.4),
           inset 0 2px 0 rgba(255, 255, 255, 0.1),
           inset 0 -2px 0 rgba(0, 0, 0, 0.2);
         overflow: hidden;
       }

       .map-frame::before {
         /* Inner border accent */
         content: '';
         position: absolute;
         inset: 2px;
         border: 2px solid var(--border-subtle);
         border-radius: 12px;
         pointer-events: none;
       }
       ```

    4. Optional corner decorations:
       - Small pokeball icons in corners (using CSS or SVG)
       - Keep subtle, not distracting

    5. Header bar within frame (optional):
       - "MAP" title in pixel font
       - Matches existing sidebar-header patterns
  </action>
  <verify>
    - MapFrame renders decorative border
    - Frame visible around map content
    - Styling matches existing game theme
    - Frame doesn't block map interactions
  </verify>
  <done>Decorative Pokemon-style frame wraps the map</done>
</task>

<task type="auto">
  <name>Task 2: Refine zone and connection styling</name>
  <files>apps/web/src/components/game/map/ZoneNode.tsx, apps/web/src/components/game/map/MapCanvas.tsx, apps/web/src/components/game/map/ZoneConnection.tsx</files>
  <action>
    Polish visual styling for Gen 4-5 aesthetic:

    1. Zone nodes:
       - Rounder edges (rounded-xl instead of rounded-lg)
       - Subtle gradient overlays
       - Light inner shadow for depth
       - Towns: Warm amber tones
       - Routes: Natural green tones
       - Current zone: Brighter glow, slight scale

    2. Zone labels (town names):
       - Use pixel font (font-pixel class)
       - Uppercase text
       - Text shadow for readability on dark background
       - Position below node with slight offset

    3. Connection paths:
       - Softer road-like appearance
       - Slightly thicker lines
       - Rounded linecaps (stroke-linecap: round)
       - Direction arrows: More stylized, larger

    4. Map background:
       - Dark with subtle texture/gradient
       - Slight vignette effect around edges
       - Consider very subtle grid or terrain pattern

    5. Current zone player icon:
       - Use trainer icon or simple marker
       - Animate subtly (gentle bounce or pulse)
  </action>
  <verify>
    - Zone styling has Gen 4-5 feel (rounder, warmer)
    - Labels are readable with pixel font
    - Paths look like roads/trails
    - Background complements zone colors
    - Current zone marker is prominent
  </verify>
  <done>Visual styling refined to match Pokemon handheld aesthetic</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Complete interactive map with:
    - Pan/zoom functionality (mouse, touch, buttons)
    - Zone nodes with town/route styling
    - Connection paths with direction arrows
    - Fog of war (visited/adjacent/hidden zones)
    - "Center on me" button
    - Travel by clicking zones or paths
    - Pokemon-style decorative frame
  </what-built>
  <how-to-verify>
    1. Start the dev server: `npm run dev`
    2. Navigate to the game page with the map
    3. Check visual appearance:
       - Does the map have a Pokemon-style decorative frame?
       - Are zones clearly distinguished (amber towns, green routes)?
       - Is the current zone highlighted with player indicator?
       - Do connection paths show direction arrows?
    4. Test interactions:
       - Pan by dragging
       - Zoom with scroll wheel (desktop) or pinch (mobile)
       - Click +/- buttons to zoom
       - Click a connected zone to travel
       - After traveling, verify map centers on new zone
       - Pan away, verify "Center on me" button appears
       - Click it to return to current zone
    5. Test fog of war:
       - Clear localStorage and refresh
       - Only Pallet Town area should be visible
       - Adjacent zones show as "?"
       - After travel, new zones reveal
    6. Test responsiveness:
       - Resize browser window
       - Check mobile viewport (375px)
       - Check tablet viewport (768px)
       - Verify map remains usable at all sizes
  </how-to-verify>
  <resume-signal>Type "approved" if map meets quality bar, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
1. Build succeeds: `cd apps/web && npm run build`
2. No TypeScript or CSS errors
3. Visual inspection confirms:
   - Frame looks polished and Pokemon-themed
   - Zone styling is consistent and attractive
   - All interactions work smoothly
   - Responsive across viewport sizes
</verification>

<success_criteria>
- Pokemon-style decorative frame around map
- Zone and connection styling refined for Gen 4-5 aesthetic
- All previously built features still work
- User approves visual quality
- Map usable on mobile, tablet, and desktop
</success_criteria>

<output>
After completion, create `.planning/phases/13-map-overhaul/13-07-SUMMARY.md`
</output>
